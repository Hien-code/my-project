extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
    if(role.permissions.includes("account_edit"))
        +alert-error(5000)
        h1(class="mb-4") Danh sách tài khoản đã xóa
        .card.mb-3
            table(
                class="table table-hover table-sm"
            )
                thead
                tr
                    th STT
                    th Avatar
                    th Họ tên
                    th Phân quyền
                    th Email
                    th Trạng thái
                    th Hành động

                tbody
                each item, index in records
                    tr
                    td #{index+1}
                    td
                        img(
                        src=item.avatar,
                        alt=item.fullName,
                        class="img-thumbnail"
                        )
                    td #{item.fullName}
                    td #{item.role.title}
                    td #{item.email}
                    td
                        if(role.permissions.includes("account_edit"))
                        if item.status == "active"
                            a(
                            href="javascript:;"
                            data-status=item.status
                            data-id=item.id
                            button-change-status
                            class="badge badge-success"
                            ) Hoạt động
                        else
                            a(
                            href="javascript:;"
                            data-status=item.status
                            data-id=item.id
                            button-change-status
                            class="badge badge-danger"
                            ) Dừng hoạt động
                        td
                            .d-flex.justify-content-center
                                button(
                                    data-id=item.id
                                    button-restore
                                    type="button"
                                    class="btn-edit"
                                ) Khôi phục
                                button(
                                    data-id=item.id
                                    button-delete-hard
                                    type="button"
                                    class="btn-delete"
                                ) Xóa vĩnh viễn

                form(
                    action=""
                    method="post"
                    id="form-restore"
                    data-path=`${prefixAdmin}/accounts/restore`
                )

                form(
                    action=""
                    method="post"
                    id="form-delete-hard"
                    data-path= `${prefixAdmin}/accounts/delete-hard`
                )
                script(src="/admin/js/trash.js")